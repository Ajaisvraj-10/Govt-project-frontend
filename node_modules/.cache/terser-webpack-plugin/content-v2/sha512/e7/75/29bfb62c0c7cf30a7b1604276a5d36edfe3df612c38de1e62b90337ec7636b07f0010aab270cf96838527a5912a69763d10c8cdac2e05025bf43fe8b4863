{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-64718b00\"],{2e3:function(t,a,e){\"use strict\";var s=e(\"b91f\"),i=e.n(s);i.a},\"5a8c\":function(t,a,e){\"use strict\";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"main-content\"},[e(\"header\",{staticClass:\"flex-align px-3\"},[e(\"img\",{attrs:{src:\"/logo.png\",width:\"150\"}}),e(\"div\",{staticClass:\"d-flex g1\"},[e(\"h5\",{on:{click:function(a){return t.backPage()}}},[e(\"i\",{staticClass:\"fa fa-angle-left mr-1\"}),t._v(\"Back\")])])]),e(\"form\",{ref:\"dataForm\",on:{submit:function(a){return a.preventDefault(),t.dataForm()}}},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"edit\"==t.crnt_tab,expression:\"crnt_tab=='edit'\"}],staticClass:\"email-sections\"},[e(\"main\",{staticClass:\"lead-main\"},[e(\"div\",{staticClass:\"card card-body\"},[t._m(0),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.name,expression:\"campaign.name\"}],staticClass:\"textarea mt-1\",attrs:{spellcheck:\"false\",required:\"required\",name:\"name\",placeholder:\"Add Name\"},domProps:{value:t.campaign.name},on:{input:function(a){a.target.composing||t.$set(t.campaign,\"name\",a.target.value)}}})])]),e(\"div\",{staticClass:\"card card-body\"},[t._m(1),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.subject,expression:\"campaign.subject\"}],staticClass:\"mt-1\",attrs:{spellcheck:\"false\",required:\"required\",name:\"subject\",placeholder:\"Add Subject\"},domProps:{value:t.campaign.subject},on:{input:function(a){a.target.composing||t.$set(t.campaign,\"subject\",a.target.value)}}})])]),e(\"div\",{staticClass:\"card\"},[e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"Template\")]),e(\"router-link\",{attrs:{to:\"/select-template/\"+t.campaign.id}},[e(\"button\",{staticClass:\"btn btn-primary py-1\",attrs:{type:\"button\"}},[t._v(t._s(t.campaign.template?\"Change\":\"Add\"))])]),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}]},[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.template,expression:\"campaign.template\"}],attrs:{type:\"text\",name:\"template\"},domProps:{value:t.campaign.template},on:{input:function(a){a.target.composing||t.$set(t.campaign,\"template\",a.target.value)}}})])],1),t.campaign.template?e(\"div\",{staticClass:\"card-body temp-box text-center\"},[e(\"img\",{staticClass:\"p-1\",attrs:{src:t.api_url+t.campaign.template_logo}})]):t._e()])]),e(\"div\",{staticClass:\"footer-next\"},[e(\"button\",{staticClass:\"btn btn-lg btn-primary px-4\",attrs:{type:\"button\",disabled:!t.campaign.template},on:{click:function(a){t.dataForm(),t.crnt_tab=\"send\"}}},[t._v(\"Next\")])])]),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"view\"==t.crnt_tab,expression:\"crnt_tab=='view'\"}],staticClass:\"email-sections\"},[e(\"main\",{staticClass:\"lead-main\"},[e(\"div\",{staticClass:\"card\"},[t._m(2),e(\"div\",{staticClass:\"card-body text-center\"},[t.campaign.id?e(\"router-link\",{attrs:{to:\"/edit-template/\"+t.campaign.id+\"/\"+t.campaign.template}},[e(\"img\",{staticClass:\"p-2\",attrs:{src:t.api_url+t.campaign.template_logo}})]):t._e()],1)]),e(\"div\",{staticClass:\"card2 w-100 mt-\"},[t._m(3),e(\"div\",{staticClass:\"pt-3 pb-2\"},[e(\"p\",{staticClass:\"m-0\",domProps:{innerHTML:t._s(t.campaign.subject)}})]),e(\"div\",[e(\"h5\",{staticClass:\"mb-2 card p-3\"},[t._v(\"Name : \"+t._s(t.campaign.name))])])])]),e(\"div\",{staticClass:\"footer-next\"},[e(\"button\",{staticClass:\"btn btn-lg btn-light  px-4\",attrs:{type:\"button\"},on:{click:function(a){t.crnt_tab=\"edit\"}}},[t._v(\"Edit\")]),e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-4\",attrs:{type:\"button\"},on:{click:function(a){t.crnt_tab=\"send\"}}},[t._v(\"Save & Sent\")])])]),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"send\"==t.crnt_tab,expression:\"crnt_tab=='send'\"}],staticClass:\"email-sections\"},[e(\"main\",{staticClass:\"lead-main\"},[e(\"div\",{staticClass:\"card\"},[t._m(4),e(\"div\",{staticClass:\"card-body\"},[e(\"div\",{staticClass:\"mb-3\"},[e(\"h4\",{staticClass:\"text-primary text-14\"},[t._v(t._s(t.campaign.leads.length)+\" Email Contents\")])]),e(\"hr\",{staticClass:\"my-3\"}),e(\"div\",{},[t._l(t.lead_categories,(function(a){return e(\"label\",{attrs:{for:\"lead_category\"+a.id}},[e(\"h4\",{staticClass:\"badge p-2 text-14\",class:t.campaign.lead_categories.includes(a.id)?\"badge-info\":\"badge-outline-info\"},[t._v(t._s(a.name))]),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.lead_categories,expression:\"campaign.lead_categories\"},{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],attrs:{type:\"checkbox\",name:\"lead_categories\",id:\"lead_category\"+a.id},domProps:{value:a.id,checked:Array.isArray(t.campaign.lead_categories)?t._i(t.campaign.lead_categories,a.id)>-1:t.campaign.lead_categories},on:{change:[function(e){var s=t.campaign.lead_categories,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=a.id,c=t._i(s,r);i.checked?c<0&&t.$set(t.campaign,\"lead_categories\",s.concat([r])):c>-1&&t.$set(t.campaign,\"lead_categories\",s.slice(0,c).concat(s.slice(c+1)))}else t.$set(t.campaign,\"lead_categories\",n)},function(a){return t.showLeads()}]}})])})),e(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.leads,expression:\"campaign.leads\"},{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],attrs:{name:\"leads\",multiple:\"\"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a=\"_value\"in t?t._value:t.value;return a}));t.$set(t.campaign,\"leads\",a.target.multiple?e:e[0])}}},t._l(t.leads,(function(a){return e(\"option\",{domProps:{value:a}},[t._v(t._s(a))])})),0)],2),e(\"hr\",{staticClass:\"my-3\"})])])]),e(\"div\",{staticClass:\"footer-next\"},[e(\"button\",{staticClass:\"btn btn-lg btn-light  px-4\",attrs:{type:\"button\"},on:{click:function(a){t.crnt_tab=\"view\"}}},[t._v(\"Back\")]),\"Success\"==t.campaign.status?e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-4\",attrs:{type:\"submit\",disabled:\"\"}},[t._v(\"Successfully Sent\")]):t._e(),e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-4\",attrs:{type:\"submit\"},on:{click:function(a){t.campaign.status=\"Starting\"}}},[t._v(t._s(\"Draft\"==t.campaign.status?\"Sent\":\"Re Sent\"))])])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",[t._v(\"Name\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",[t._v(\"Email Subject\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"Designed Email\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header2 w-100 flex-align\"},[e(\"h4\",[t._v(\"Subject\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"CRM Contents\")])])}],n=(e(\"b0c0\"),e(\"d3b7\"),e(\"ac1f\"),e(\"5319\"),{metaInfo:{title:\"Home\"},data:function(){return{campaign:{id:null,status:\"Draft\",template:null,template_logo:\"\",leads:[],lead_categories:[]},templates:[],lead_categories:[],leads:[],show_edit_template:!1,crnt_tab:\"edit\"}},mounted:function(){this.$route.params.id&&(this.campaign.id=this.$route.params.id,this.getCampaign()),this.getTemplates(),this.getCategories(),this.$root.auth_token&&this.getUser()},methods:{getCampaign:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/campaigns/\"+this.campaign.id+\"/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.campaign=a,a.name&&a.subject&&(t.crnt_tab=\"view\")}))},dataForm:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"POST\";if(this.$root.lock_btn)return!1;this.$root.lock_btn=!0;var e=new FormData(this.$refs[\"dataForm\"]);e.append(\"status\",this.campaign.status),e.append(\"user\",this.$root.userId);var s=new Headers;s.append(\"Authorization\",\"Bearer \"+this.$root.auth_token);var i=\"\";this.campaign.id&&(a=\"PUT\",i+=this.campaign.id+\"/\"),fetch(this.api_url+\"/employee/campaigns/\"+i,{method:a,body:e,headers:s}).then((function(t){return t.json()})).then((function(a){t.$root.lock_btn=!1,a.id>0?(t.campaign=a,\"Starting\"==t.campaign.status&&t.startCampaign()):t.showAlert(\"Something Wrong!\")}))},getTemplates:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/templates/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.templates=a}))},getCategories:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/lead_categories/?user_wise=yes\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.lead_categories=a}))},showLeads:function(){var t=this,a=new Headers,e=new FormData(this.$refs[\"dataForm\"]);a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/get_filter_leads/\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(a){a.success&&(t.leads=a.leads,t.campaign.leads=a.leads)}))},startCampaign:function(){var t=new Headers,a=new FormData;a.append(\"campaign\",this.campaign.id),t.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/get_filter_leads/\",{method:\"PUT\",body:a,headers:t}).then((function(t){return t.json()})).then((function(t){t.success}))},selectTemplate:function(t){this.campaign.template=t.id,this.campaign.template_logo=t.logo.replace(this.api_url,\"\"),this.show_edit_template=!1},backPage:function(){\"send\"==this.crnt_tab?this.crnt_tab=\"view\":\"view\"!=this.crnt_tab&&\"edit\"!=this.crnt_tab||this.$router.push(\"/campaigns\")}}}),r=n,c=(e(\"2000\"),e(\"2877\")),o=Object(c[\"a\"])(r,s,i,!1,null,\"37254ae6\",null);a[\"default\"]=o.exports},b0c0:function(t,a,e){var s=e(\"83ab\"),i=e(\"9bf2\").f,n=Function.prototype,r=n.toString,c=/^\\s*function ([^ (]*)/,o=\"name\";s&&!(o in n)&&i(n,o,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return\"\"}}})},b91f:function(t,a,e){}}]);","extractedComments":[]}