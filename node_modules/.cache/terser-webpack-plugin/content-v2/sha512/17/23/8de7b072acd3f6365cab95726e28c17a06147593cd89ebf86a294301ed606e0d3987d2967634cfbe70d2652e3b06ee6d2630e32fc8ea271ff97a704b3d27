{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-249a3fa7\"],{1613:function(t,a,e){},\"5a8c\":function(t,a,e){\"use strict\";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"main-content\"},[e(\"MainHeader\"),e(\"form\",{ref:\"dataForm\",on:{submit:function(a){return a.preventDefault(),t.dataForm()}}},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"edit\"==t.crnt_tab,expression:\"crnt_tab=='edit'\"}],staticClass:\"email-sections\"},[e(\"main\",{staticClass:\"lead-main\"},[e(\"div\",{staticClass:\"card p-0\"},[e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"Email Subject\")]),e(\"button\",{directives:[{name:\"b-modal\",rawName:\"v-b-modal.add-subject\",modifiers:{\"add-subject\":!0}}],staticClass:\"btn btn-primary\"},[t._v(t._s(t.campaign.subject?\"Edit\":\"Add\"))])]),e(\"div\",{},[e(\"textarea\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"},{name:\"model\",rawName:\"v-model\",value:t.campaign.subject,expression:\"campaign.subject\"}],staticClass:\"mt-2\",attrs:{name:\"subject\",placeholder:\"Add Subject\"},domProps:{value:t.campaign.subject},on:{input:function(a){a.target.composing||t.$set(t.campaign,\"subject\",a.target.value)}}}),e(\"p\",{staticClass:\"mb-0 p-3\",domProps:{innerHTML:t._s(t.campaign.subject)}})]),e(\"b-modal\",{attrs:{id:\"add-subject\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[e(\"div\",{staticClass:\"modal-bar\"}),e(\"div\",{staticClass:\"modal-header px-0 pb-0 pt-3 border-0\"},[e(\"h4\",[t._v(\"Add Subject\")])]),e(\"hr\",{staticClass:\"my-2\"}),e(\"div\",{staticClass:\"edit-modal-body2 text-center pb-2\",staticStyle:{\"row-gap\":\"25px\"}},[e(\"div\",{staticClass:\" edit-textarea\"},[e(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.subject,expression:\"campaign.subject\"}],staticClass:\"mt-2\",attrs:{spellcheck:\"false\",required:\"required\",name:\"subject\",placeholder:\"Add Subject\"},domProps:{value:t.campaign.subject},on:{input:function(a){a.target.composing||t.$set(t.campaign,\"subject\",a.target.value)}}})])]),e(\"div\",{staticClass:\"footer-modal\"},[e(\"button\",{staticClass:\"btn btn-outline-primary px-3 py-2\",on:{click:function(a){return t.$bvModal.hide(\"add-subject\")}}},[t._v(\"Close\")]),e(\"button\",{staticClass:\"btn btn-primary px-3 py-2\",on:{click:function(a){return t.$bvModal.hide(\"add-subject\")}}},[t._v(\"+ Add\")])])])],1),e(\"div\",{staticClass:\"card p-0\"},[t._m(0),e(\"div\",{staticClass:\"card-body\"},[e(\"div\",{staticClass:\"mb-2\"},[e(\"h4\",{staticClass:\"text-primary text-14\"},[t._v(t._s(t.campaign.leads.length)+\" Email Contents\")])]),e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\"col-6 pr-1 mt-3\"},[t._m(1),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.start_date,expression:\"campaign.start_date\"}],staticClass:\"textarea mt-2\",attrs:{type:\"date\",name:\"start_date\"},domProps:{value:t.campaign.start_date},on:{change:function(a){return t.showLeads()},input:function(a){a.target.composing||t.$set(t.campaign,\"start_date\",a.target.value)}}})])]),e(\"div\",{staticClass:\"col-6 pl-1 mt-3\"},[t._m(2),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.end_date,expression:\"campaign.end_date\"}],staticClass:\"textarea mt-2\",attrs:{type:\"date\",name:\"end_date\"},domProps:{value:t.campaign.end_date},on:{change:function(a){return t.showLeads()},input:function(a){a.target.composing||t.$set(t.campaign,\"end_date\",a.target.value)}}})])]),e(\"div\",{staticClass:\"col-6 pr-1 mt-3\"},[t._m(3),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.lead_category,expression:\"campaign.lead_category\"}],attrs:{name:\"lead_category\"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a=\"_value\"in t?t._value:t.value;return a}));t.$set(t.campaign,\"lead_category\",a.target.multiple?e:e[0])},function(a){return t.showLeads()}]}},[e(\"option\",{domProps:{value:null}},[t._v(\"Select Category\")]),t._l(t.lead_categories,(function(a){return e(\"option\",{domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2)])]),e(\"div\",{staticClass:\"col-6 pl-1 mt-3\"},[t._m(4),e(\"div\",{staticClass:\" edit-textarea\"},[e(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.lead_status,expression:\"campaign.lead_status\"}],attrs:{name:\"lead_status\"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a=\"_value\"in t?t._value:t.value;return a}));t.$set(t.campaign,\"lead_status\",a.target.multiple?e:e[0])},function(a){return t.showLeads()}]}},[e(\"option\",{domProps:{value:\"\"}},[t._v(\"All\")]),t._l(t.lead_statuses,(function(a){return e(\"option\",{domProps:{value:a.name}},[t._v(t._s(a.name))])}))],2)])]),e(\"div\",{staticClass:\"col-12 mt-3\"},[t._m(5),e(\"div\",{staticClass:\"col-12 px-0 d-flex g2 mt-1\"},[t._l(t.lead_tags,(function(a){return e(\"div\",{staticClass:\"attribute_snippet\"},[t._v(t._s(a.name))])})),e(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.campaign.lead_tags,expression:\"campaign.lead_tags\"}],attrs:{name:\"lead_tags\"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a=\"_value\"in t?t._value:t.value;return a}));t.$set(t.campaign,\"lead_tags\",a.target.multiple?e:e[0])}}},t._l(t.lead_tags,(function(a){return e(\"option\",{domProps:{value:a.id}},[t._v(t._s(a.name))])})),0)],2)])])])]),e(\"div\",{staticClass:\"card p-0\"},[t._m(6),e(\"div\",{staticClass:\"card-body\"},[e(\"div\",{},[e(\"h4\",{staticClass:\"text-primary text-14\"},[t._v(t._s(t.campaign.leads.length)+\" Emails\")])])])])]),e(\"div\",{staticClass:\"footer-next\"},[e(\"button\",{staticClass:\"btn btn-lg btn-primary px-3\",attrs:{type:\"button\",disabled:!t.campaign.template},on:{click:function(a){t.dataForm(),t.crnt_tab=\"view\"}}},[t._v(\"Save & Next\")])])]),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"view\"==t.crnt_tab,expression:\"crnt_tab=='view'\"}],staticClass:\"email-sections\"},[e(\"main\",{staticClass:\"lead-main\"},[e(\"div\",{staticClass:\"card p-0\"},[t._m(7),e(\"div\",{staticClass:\"card-body\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\"col-12 mb-3\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"From:\")]),e(\"div\",{staticClass:\"attribute_snippet\",staticStyle:{width:\"fit-content\"}},[t._v(t._s(t.$root.userInfo.aws_email))])]),e(\"div\",{staticClass:\"col-12 mb-3\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"Email Subject:\")]),e(\"div\",{staticClass:\"attribute_snippet\",staticStyle:{\"white-space\":\"pre-wrap\"}},[t._v(t._s(t.campaign.subject))])]),e(\"div\",{staticClass:\"col-12\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"Audeince:\")]),e(\"div\",{staticClass:\"d-flex g2\"},[t._l(t.lead_categories,(function(a){return a.id==t.campaign.lead_category?e(\"div\",{staticClass:\"attribute_snippet\",staticStyle:{width:\"fit-content\"}},[t._v(t._s(a.name))]):t._e()})),e(\"div\",{staticClass:\"attribute_snippet\",staticStyle:{width:\"fit-content\"}},[t._v(t._s(t.campaign.lead_status))]),e(\"div\",{staticClass:\"attribute_snippet\",staticStyle:{width:\"fit-content\"}},[t._v(t._s(t.campaign.leads.length)+\" Emails\")])],2)])])])])]),e(\"div\",{staticClass:\"footer-next\"},[e(\"button\",{staticClass:\"btn btn-lg btn-light  px-3\",attrs:{type:\"button\",disabled:!(\"Draft\"==t.campaign.status||\"Temp\"==t.campaign.status||\"Failed\"==t.campaign.status)},on:{click:function(a){t.crnt_tab=\"edit\"}}},[t._v(\"Edit\")]),\"Draft\"==t.campaign.status||\"Temp\"==t.campaign.status?e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-3\",attrs:{type:\"submit\"},on:{click:function(a){t.campaign.status=\"Starting\"}}},[t._v(\"Send\")]):\"Sending\"==t.campaign.status?e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-3\",attrs:{type:\"submit\"},on:{click:function(a){return t.stopCampaign()}}},[t._v(\"Stop\")]):e(\"button\",{staticClass:\"btn btn-lg btn-primary  px-3\",attrs:{type:\"submit\"},on:{click:function(a){return t.viewAnalytics()}}},[t._v(\"Analytics\")])])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"Email Audience\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",[t._v(\"Start Date\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",[t._v(\"End Date\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"Category\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"Status\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\" flex-align\"},[e(\"h4\",{staticClass:\"mb-2\"},[t._v(\"Tags\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header flex-align\"},[e(\"h4\",[t._v(\"Availbale Emails\")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"card-header w-100 flex-align\"},[e(\"h4\",[t._v(\"Confirmation\")])])}],n=(e(\"b0c0\"),e(\"d3b7\"),e(\"ac1f\"),e(\"5319\"),e(\"2504\")),r={metaInfo:{title:\"Home\"},components:{MainHeader:n[\"a\"]},data:function(){return{campaign:{id:null,status:\"Draft\",template:null,template_logo:\"\",start_date:null,end_date:null,leads:[],lead_categories:[],lead_tags:[],lead_category:null,lead_status:\"\"},templates:[],lead_categories:[],lead_tags:[],leads:[],show_edit_template:!1,crnt_tab:\"edit\"}},mounted:function(){this.$route.params.id&&(this.campaign.id=this.$route.params.id,this.getCampaign()),this.getTemplates(),this.getCategories(),this.getTags(),this.$root.auth_token&&this.getUser()},methods:{getCampaign:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/campaigns/\"+this.campaign.id+\"/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.campaign=a,a.name&&a.subject&&(t.crnt_tab=\"view\")}))},dataForm:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"POST\";if(this.$root.lock_btn)return!1;this.$root.lock_btn=!0;var e=new FormData(this.$refs[\"dataForm\"]);e.append(\"status\",this.campaign.status),e.append(\"user\",this.$root.userId);var s=new Headers;s.append(\"Authorization\",\"Bearer \"+this.$root.auth_token);var i=\"\";this.campaign.id&&(a=\"PUT\",i+=this.campaign.id+\"/\"),fetch(this.api_url+\"/employee/campaigns/\"+i,{method:a,body:e,headers:s}).then((function(t){return t.json()})).then((function(a){t.$root.lock_btn=!1,a.id>0?(t.campaign=a,\"Starting\"==t.campaign.status&&t.startCampaign()):t.showAlert(\"Something Wrong!\")}))},getTemplates:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/templates/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.templates=a}))},getCategories:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/lead_categories/?user_wise=yes\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.lead_categories=a,a.length>0&&(t.campaign.lead_category=a[0].id)}))},getTags:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/lead_tags/?user_wise=yes\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.lead_tags=a}))},showLeads:function(){var t=this,a=new Headers,e=new FormData(this.$refs[\"dataForm\"]);a.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/get_filter_leads/\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(a){a.success&&(t.leads=a.leads,t.campaign.leads=a.leads)}))},startCampaign:function(){var t=new Headers,a=new FormData;a.append(\"campaign\",this.campaign.id),t.append(\"Authorization\",\"Bearer \"+this.$root.auth_token),fetch(this.api_url+\"/employee/get_filter_leads/\",{method:\"PUT\",body:a,headers:t}).then((function(t){return t.json()})).then((function(t){t.success}))},selectTemplate:function(t){this.campaign.template=t.id,this.campaign.template_logo=t.logo.replace(this.api_url,\"\"),this.show_edit_template=!1},backPage:function(){\"view\"!=this.crnt_tab&&\"edit\"!=this.crnt_tab||this.$router.push(\"/campaigns\")}}},c=r,l=(e(\"e36d\"),e(\"2877\")),o=Object(l[\"a\"])(c,s,i,!1,null,\"09275609\",null);a[\"default\"]=o.exports},e36d:function(t,a,e){\"use strict\";var s=e(\"1613\"),i=e.n(s);i.a}}]);","extractedComments":[]}